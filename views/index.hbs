<textarea id='editor'>
  <p>여기는 테스트 입니다.</p>
<p>&nbsp;</p>
<div style="position: relative; max-width: 470px; box-shadow: 0 1px 5px #999; margin: 10px auto 30px;" data-opengraph-image="https://tistory4.daumcdn.net/tistory/1/attach/65b6f4219cec408ea2ffb4ccacff2d26" data-opengraph-title="티스토리에서 알려드립니다." data-opengraph-description="티스토리의 새로운 소식을 전합니다." data-opengraph-host="notice.tistory.com" data-opengraph-url="http://notice.tistory.com">
<div style="width: 100%; height: 235px; overflow: hidden;"><a href="http://notice.tistory.com"><img style="width: 100%;" src="https://tistory4.daumcdn.net/tistory/1/attach/65b6f4219cec408ea2ffb4ccacff2d26" /></a></div>
<div style="width: 100%; padding: 10px; box-sizing: border-box;"><a style="display: block; font-weight: 500; font-size: 18px; overflow: hidden; word-wrap: break-word; line-height: 25px; text-overflow: ellipsis; white-space: nowrap; color: #666; text-decoration: none;" href="http://notice.tistory.com">티스토리에서 알려드립니다.</a>
<div style="font-size: 12px; line-height: 18px; height: 36px; white-space: normal; -webkit-line-clamp: 2; -webkit-box-orient: vertical; text-overflow: ellipsis; display: -webkit-box; overflow: hidden; color: #666;">티스토리의 새로운 소식을 전합니다.</div>
<div style="font-size: 11px; color: #999; line-height: 14px;">notice.tistory.com</div>
</div>
</div>
<script src="https://gist.github.com/joostory/3ded4fb4b61c27ceb98f199389d18641.js" type='text/javascript'></script>
</textarea>

<script src="//cdn.tinymce.com/4/tinymce.min.js"></script>
<script src="/bundle.js"></script>
<script>
  tinymce.init({
    selector:'textarea#editor',
    body_class: 'content',
    content_css: '/static/style/content.css',
    plugins: 'opengraph code autoresize',
    toolbar: 'opengraph code',
    extended_valid_elements : 'script[type|src]',
    opengraph: {
      fetch_handler: (url, callback) => {
        fetch(`/opengraph?url=${encodeURIComponent(url)}`, {
          method: 'get'
        })
        .then(res => res.json())
        .then(json => {
          callback(json)
        })
      }
    }
  });
</script>
